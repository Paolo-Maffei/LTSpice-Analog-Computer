Version 4
SHEET 1 1788 868
WIRE -496 -96 -576 -96
WIRE -144 -96 -192 -96
WIRE -32 -96 -64 -96
WIRE 144 -96 96 -96
WIRE 224 -96 224 -112
WIRE 224 -96 144 -96
WIRE 272 -96 224 -96
WIRE 336 -96 272 -96
WIRE 576 -96 464 -96
WIRE -576 -80 -576 -96
WIRE -32 -32 -64 -32
WIRE 144 -32 96 -32
WIRE 224 -32 144 -32
WIRE 336 -32 224 -32
WIRE 512 -32 464 -32
WIRE 224 0 224 -32
WIRE 512 0 512 -32
WIRE -576 16 -576 0
WIRE 400 48 400 -16
WIRE 848 80 784 80
WIRE 1104 80 1008 80
WIRE 1488 80 1456 80
WIRE 1008 96 1008 80
WIRE 784 112 784 80
WIRE 960 112 784 112
WIRE 1456 112 1456 80
WIRE 960 160 944 160
WIRE 1200 160 1120 160
WIRE 784 176 784 112
WIRE 880 176 784 176
WIRE 944 176 944 160
WIRE 1120 176 1120 160
WIRE -496 192 -576 192
WIRE -144 192 -192 192
WIRE -32 192 -64 192
WIRE 144 192 96 192
WIRE 224 192 224 176
WIRE 224 192 144 192
WIRE 272 192 224 192
WIRE 336 192 272 192
WIRE 576 192 576 -96
WIRE 576 192 464 192
WIRE 672 192 672 80
WIRE 672 192 576 192
WIRE 736 192 672 192
WIRE 784 192 784 176
WIRE 880 192 880 176
WIRE 1008 192 1008 176
WIRE -576 208 -576 192
WIRE 736 208 736 192
WIRE 1456 224 1456 192
WIRE -32 256 -64 256
WIRE 144 256 96 256
WIRE 224 256 144 256
WIRE 336 256 224 256
WIRE 512 256 464 256
WIRE 736 256 720 256
WIRE 720 272 720 256
WIRE 224 288 224 256
WIRE 512 288 512 256
WIRE 784 288 784 272
WIRE 880 288 880 256
WIRE 1120 288 1120 240
WIRE 1488 288 1456 288
WIRE -576 304 -576 288
WIRE 1456 320 1456 288
WIRE 400 336 400 272
WIRE 1456 432 1456 400
WIRE -144 480 -192 480
WIRE -32 480 -64 480
WIRE 144 480 96 480
WIRE 224 480 224 464
WIRE 224 480 144 480
WIRE 288 480 224 480
WIRE 336 480 288 480
WIRE 576 480 576 192
WIRE 576 480 464 480
WIRE 832 496 784 496
WIRE 1072 496 1024 496
WIRE 1488 496 1456 496
WIRE -496 512 -576 512
WIRE -576 528 -576 512
WIRE 784 528 784 496
WIRE 1024 528 1024 496
WIRE 1456 528 1456 496
WIRE -32 544 -64 544
WIRE 144 544 96 544
WIRE 224 544 144 544
WIRE 336 544 224 544
WIRE 512 544 464 544
WIRE 224 576 224 544
WIRE 512 576 512 544
WIRE -576 624 -576 608
WIRE 400 624 400 560
WIRE 784 640 784 608
WIRE 1024 640 1024 608
WIRE 1456 640 1456 608
FLAG -576 16 0
FLAG 400 336 K_V
FLAG 224 288 0
FLAG 512 288 0
FLAG 224 96 0
FLAG 880 288 0
FLAG 784 288 0
FLAG 720 272 0
FLAG 848 80 Pos
FLAG -192 192 V+
FLAG -64 256 V-
FLAG 672 80 Shaft
FLAG -576 624 0
FLAG -576 304 0
FLAG -496 -96 K_U
FLAG -496 192 K_V
FLAG -496 512 K_W
FLAG 400 48 K_U
FLAG 224 0 0
FLAG 512 0 0
FLAG 224 -192 0
FLAG -192 -96 U+
FLAG -64 -32 U-
FLAG 400 624 K_W
FLAG 224 576 0
FLAG 512 576 0
FLAG 224 384 0
FLAG -192 480 W+
FLAG -64 544 W-
FLAG 272 -96 MU
FLAG 272 192 MV
FLAG 288 480 MW
FLAG 944 176 0
FLAG 1008 192 0
FLAG 1104 80 Alpha
FLAG 1200 160 Shaft
FLAG 1120 288 0
FLAG 784 640 0
FLAG 1024 640 0
FLAG 832 496 SINE
FLAG 1072 496 COSINE
FLAG 1456 640 0
FLAG 1488 496 H1
FLAG 1456 432 0
FLAG 1488 288 H2
FLAG 1456 224 0
FLAG 1488 80 H3
SYMBOL dynamic-gyrator 400 224 M0
SYMATTR InstName X2
SYMBOL gyrator 32 224 R0
WINDOW 39 -22 -69 Left 0
SYMATTR SpiceLine L=-1
SYMATTR InstName X3
SYMBOL bv -576 -96 R0
WINDOW 0 -78 58 Left 0
SYMATTR InstName B1
SYMATTR Value V=cos(V(Pos))*{Kt}
SYMBOL g 784 176 R0
SYMATTR InstName G1
SYMATTR Value 1m
SYMBOL cap 864 192 R0
SYMATTR InstName C1
SYMATTR Value 1m
SYMBOL cap 128 192 R0
WINDOW 0 44 31 Left 0
WINDOW 3 41 44 Left 0
SYMATTR InstName CV
SYMATTR Value {L_Leak}
SYMBOL bv -576 192 R0
WINDOW 0 -76 52 Left 0
SYMATTR InstName B2
SYMATTR Value V=cos(V(Pos)+2*pi/3)*{Kt}
SYMBOL bv -576 512 R0
WINDOW 0 -80 58 Left 0
SYMATTR InstName B3
SYMATTR Value V=cos(V(Pos)+4*pi/3)*{Kt}
SYMBOL dynamic-gyrator 400 -64 M0
SYMATTR InstName X1
SYMBOL gyrator 32 -64 R0
WINDOW 39 -22 -69 Left 0
SYMATTR SpiceLine L=-1
SYMATTR InstName X4
SYMBOL cap 128 -96 R0
WINDOW 0 44 31 Left 0
WINDOW 3 42 44 Left 0
SYMATTR InstName CU
SYMATTR Value {L_Leak}
SYMBOL dynamic-gyrator 400 512 M0
SYMATTR InstName X5
SYMBOL gyrator 32 512 R0
WINDOW 39 -22 -69 Left 0
SYMATTR SpiceLine L=-1
SYMATTR InstName X6
SYMBOL cap 128 480 R0
WINDOW 0 44 31 Left 0
WINDOW 3 42 44 Left 0
SYMATTR InstName CW
SYMATTR Value {L_Leak}
SYMBOL res 208 -208 R0
WINDOW 0 45 30 Left 0
WINDOW 3 40 43 Left 0
SYMATTR InstName Rtmp1
SYMATTR Value {Rtemp}
SYMBOL res 208 80 R0
WINDOW 0 38 35 Left 0
WINDOW 3 32 47 Left 0
SYMATTR InstName Rtmp2
SYMATTR Value {Rtemp}
SYMBOL res 208 368 R0
WINDOW 0 44 28 Left 0
WINDOW 3 38 40 Left 0
SYMATTR InstName Rtmp3
SYMATTR Value {Rtemp}
SYMBOL res -48 -112 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R4
SYMATTR Value {R}
SYMBOL res -48 176 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R5
SYMATTR Value {R}
SYMBOL res -48 464 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R6
SYMATTR Value {R}
SYMBOL e 1008 80 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL cap 1104 176 R0
SYMATTR InstName Cintertia
SYMATTR Value {Inertia}
SYMBOL bv 784 512 R0
SYMATTR InstName B4
SYMATTR Value V=SIN(V(POS))
SYMBOL bv 1024 512 R0
SYMATTR InstName B5
SYMATTR Value V=COS(V(POS))
SYMBOL bv 1456 512 R0
SYMATTR InstName B6
SYMATTR Value V=IF(V(K_U)>0,VHALL,0)
SYMBOL bv 1456 304 R0
SYMATTR InstName B7
SYMATTR Value V=IF(V(K_V)>0,VHALL,0)
SYMBOL bv 1456 96 R0
SYMATTR InstName B8
SYMATTR Value V=IF(V(K_W)>0,VHALL,0)
TEXT 768 64 Left 0 !.ic V(Pos)={IP}
TEXT 256 -208 Left 0 !.param Rtemp=10meg
TEXT 656 -16 Left 0 ;Shaft terminal:	Voltage is the speed of shaft [radians per second]\n		Current is the torque [Nm]
TEXT -96 600 Left 0 ;U,V,W (+ and -) are the electrical winding connections
TEXT 696 344 Left 0 ;Parameters:\n	L_Leak = leakage inductance of winding\n	Kt = Torque vs Current, how many NewtonMetres for 1 Ampere\n	Interia = shaft intertia, Default value = 0\n	IP = initial angle of shaft in radians, Default value = 0
TEXT 952 48 Left 0 ;Alpha output: How many radians is the shaft angle.
TEXT 696 424 Left 0 !.params Inertia=0
TEXT 696 408 Left 0 !.params IP=0
TEXT 1448 24 Left 2 !.param VHALL=1
TEXT 784 696 Left 2 ;Resolver
TEXT 1456 696 Left 2 ;Hall Sensor
