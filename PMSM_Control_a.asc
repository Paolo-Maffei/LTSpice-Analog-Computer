Version 4
SHEET 1 2208 736
WIRE -1200 -464 -1232 -464
WIRE -1136 -464 -1200 -464
WIRE -96 -464 -176 -464
WIRE -32 -464 -96 -464
WIRE -928 -448 -1008 -448
WIRE -848 -448 -928 -448
WIRE -1200 -432 -1232 -432
WIRE -1136 -432 -1200 -432
WIRE -624 -432 -720 -432
WIRE -96 -432 -624 -432
WIRE -32 -432 -96 -432
WIRE -928 -416 -1008 -416
WIRE -848 -416 -928 -416
WIRE -1200 -400 -1232 -400
WIRE -1136 -400 -1200 -400
WIRE -304 -400 -720 -400
WIRE -32 -400 -80 -400
WIRE -848 -384 -912 -384
WIRE 128 -384 96 -384
WIRE 224 -384 128 -384
WIRE 416 -384 352 -384
WIRE -32 -368 -80 -368
WIRE 224 -352 176 -352
WIRE -32 -336 -80 -336
WIRE -1104 -304 -1136 -304
WIRE -992 -304 -1024 -304
WIRE -32 -304 -80 -304
WIRE 176 -224 176 -352
WIRE 176 -224 64 -224
WIRE -992 -208 -992 -304
WIRE -912 -208 -992 -208
WIRE -800 -208 -912 -208
WIRE -912 -176 -1024 -176
WIRE -800 -176 -912 -176
WIRE -800 -144 -848 -144
WIRE -592 -128 -672 -128
WIRE -496 -128 -592 -128
WIRE -224 -128 -368 -128
WIRE -32 -128 -224 -128
WIRE -800 -112 -848 -112
WIRE -496 -96 -560 -96
WIRE -304 -96 -304 -400
WIRE -224 -96 -304 -96
WIRE -32 -96 -224 -96
WIRE -800 -80 -848 -80
WIRE -32 -64 -80 -64
WIRE -800 -48 -848 -48
WIRE -560 -48 -560 -96
WIRE -288 -48 -560 -48
WIRE 128 -48 96 -48
WIRE 224 -48 128 -48
WIRE 400 -48 352 -48
WIRE -32 -32 -80 -32
WIRE 176 -16 176 -224
WIRE 224 -16 176 -16
WIRE -592 0 -592 -128
WIRE -560 0 -592 0
WIRE -496 0 -560 0
WIRE -32 0 -80 0
WIRE -624 32 -624 -432
WIRE -560 32 -624 32
WIRE -496 32 -560 32
WIRE -320 32 -368 32
WIRE -288 32 -288 -48
WIRE -288 32 -320 32
WIRE -32 32 -80 32
WIRE -560 64 -704 64
WIRE -496 64 -560 64
WIRE -656 208 -704 208
WIRE -432 208 -656 208
WIRE -432 240 -624 240
WIRE -96 240 -144 240
WIRE -1136 256 -1168 256
WIRE -704 256 -704 208
WIRE -704 256 -768 256
WIRE -944 272 -1008 272
WIRE -896 272 -944 272
WIRE -96 272 -144 272
WIRE -1136 288 -1168 288
WIRE -656 288 -768 288
WIRE -432 288 -656 288
WIRE -944 304 -1008 304
WIRE -896 304 -944 304
WIRE -1136 320 -1168 320
WIRE -704 320 -768 320
WIRE -432 320 -544 320
WIRE -32 336 -144 336
WIRE 32 336 -32 336
WIRE 32 352 32 336
WIRE -704 368 -704 320
WIRE -656 368 -704 368
WIRE -432 368 -656 368
WIRE -80 368 -144 368
WIRE -432 400 -464 400
WIRE -624 416 -624 240
WIRE -544 416 -544 320
WIRE -464 416 -464 400
WIRE -624 432 -624 416
WIRE -544 432 -544 416
WIRE -464 432 -464 416
WIRE -336 448 -336 416
WIRE -288 448 -288 416
WIRE -240 448 -240 416
WIRE 32 480 32 432
WIRE -624 544 -624 512
WIRE -544 544 -544 512
WIRE -544 544 -624 544
WIRE -464 544 -464 512
WIRE -464 544 -544 544
WIRE -544 576 -544 544
FLAG -928 -448 ALFA
FLAG -928 -416 BETA
FLAG -1168 256 D
FLAG -1168 288 Q
FLAG -912 -384 THETA
FLAG -944 272 ALFA1
FLAG -944 304 BETA1
FLAG -912 -208 C_Speed
FLAG -912 -176 shaft
FLAG -544 576 0
FLAG 32 480 0
FLAG -32 336 shaft
FLAG -1168 320 THETA
FLAG -624 416 U
FLAG -544 416 V
FLAG -464 416 W
FLAG -1136 -304 0
FLAG -176 -464 0
FLAG -96 -464 I_REF_D
FLAG -96 -432 I_FBK_D
FLAG -224 -128 I_REF_Q
FLAG -224 -96 I_FBK_Q
FLAG -80 368 THETA
FLAG -1200 -432 V
FLAG -1200 -400 W
FLAG -1200 -464 U
FLAG 416 -384 Q
FLAG 400 -48 D
FLAG -848 -80 0
FLAG -80 -336 0
FLAG -80 0 0
FLAG 128 -48 V_D
FLAG 128 -384 V_Q
FLAG -656 208 VF
FLAG -656 288 UF
FLAG -656 368 WF
FLAG -560 32 c1
FLAG -560 64 c2
FLAG -560 0 qwe
FLAG -320 32 o
SYMBOL clarke -1040 -448 R0
SYMATTR InstName X1
SYMBOL park -752 -432 R0
SYMATTR InstName X2
SYMBOL inv_park -1040 272 R0
SYMATTR InstName X3
SYMBOL inv_clarke -800 272 R0
SYMATTR InstName X4
SYMBOL constant_module -896 -160 R0
SYMATTR InstName X8
SYMATTR SpiceLine K=100
SYMBOL motor_3_R_H -304 304 R0
SYMATTR InstName X24
SYMATTR SpiceLine L_Leak=.005 R={R} Kt=.86 IP=0 Inertia=.036 VHALL=5
SYMBOL res -480 416 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL res -560 416 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL res -640 416 R0
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL res 16 336 R0
SYMATTR InstName R4
SYMATTR Value 1
SYMBOL constant_module -896 -128 R0
SYMATTR InstName X9
SYMATTR SpiceLine K=0
SYMBOL constant_module -128 -416 R0
SYMATTR InstName X13
SYMATTR SpiceLine K=1
SYMBOL constant_module -128 -384 R0
SYMATTR InstName X14
SYMATTR SpiceLine K=0
SYMBOL constant_module -128 -80 R0
SYMATTR InstName X19
SYMATTR SpiceLine K=1
SYMBOL constant_module -128 -48 R0
SYMATTR InstName X20
SYMATTR SpiceLine K=0
SYMBOL voltage -1008 -304 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 -43 -12 VRight 2
WINDOW 3 48 -1 VRight 2
SYMATTR InstName V1
SYMATTR Value PULSE(0 60 0 2000m 2000m 3 10)
SYMBOL limit_module 320 -400 R0
SYMATTR InstName X11
SYMBOL limit_module 320 -64 R0
SYMATTR InstName X12
SYMBOL constant_module 16 -240 R0
SYMATTR InstName X16
SYMATTR SpiceLine K=300
SYMBOL PID_WU_Diff -704 -208 R0
SYMATTR InstName X17
SYMBOL PID_WU_Diff 64 -464 R0
SYMATTR InstName X5
SYMBOL PID_WU_Diff 64 -128 R0
SYMATTR InstName X6
SYMBOL constant_module -896 -64 R0
SYMATTR InstName X7
SYMATTR SpiceLine K=20
SYMBOL constant_module -128 -320 R0
SYMATTR InstName X18
SYMATTR SpiceLine K=20
SYMBOL constant_module -128 16 R0
SYMATTR InstName X22
SYMATTR SpiceLine K=20
SYMBOL limit_module -400 -144 R0
SYMATTR InstName X28
SYMBOL constant_module -752 48 R0
SYMATTR InstName X29
SYMATTR SpiceLine k=60
SYMBOL Sampler -400 16 R0
SYMATTR InstName X10
TEXT -696 656 Left 2 !.tran 10
TEXT -320 160 Left 0 !.param R=.835
TEXT -320 176 Left 0 !.ic V(shaft)=0
TEXT -840 24 Left 2 ;Current Limit
TEXT -96 -256 Left 2 ;Overvoltage Limit
