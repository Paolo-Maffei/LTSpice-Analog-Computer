Version 4
SHEET 1 1444 680
WIRE 736 -256 -368 -256
WIRE 864 -256 736 -256
WIRE -368 -176 -368 -256
WIRE -304 -176 -368 -176
WIRE -144 -176 -176 -176
WIRE 736 -176 736 -256
WIRE 864 -176 736 -176
WIRE 1056 -176 992 -176
WIRE -144 -160 -144 -176
WIRE -128 -160 -144 -160
WIRE 176 -160 128 -160
WIRE 576 -160 496 -160
WIRE 176 -128 -16 -128
WIRE 368 -128 304 -128
WIRE 576 -128 368 -128
WIRE 736 -128 736 -176
WIRE 736 -128 704 -128
WIRE -128 -96 -144 -96
WIRE 176 -96 128 -96
WIRE 576 -96 512 -96
WIRE -304 -80 -368 -80
WIRE -144 -80 -144 -96
WIRE -144 -80 -176 -80
WIRE 128 -80 128 -96
WIRE 736 -80 736 -128
WIRE 864 -80 736 -80
WIRE 1056 -80 992 -80
WIRE 736 -16 736 -80
WIRE 864 -16 736 -16
WIRE 1056 16 992 16
WIRE -368 32 -368 -80
WIRE 368 32 368 -128
WIRE 368 32 -368 32
WIRE 432 32 368 32
WIRE 864 48 704 48
WIRE 432 80 352 80
WIRE 352 112 352 80
WIRE 736 112 736 -16
WIRE 864 112 736 112
WIRE 1056 112 992 112
WIRE 1248 112 1184 112
WIRE 736 208 736 112
WIRE 864 208 736 208
WIRE 1056 208 992 208
WIRE 352 224 352 192
WIRE -320 288 -352 288
WIRE -160 288 -192 288
WIRE -160 304 -160 288
WIRE -128 304 -160 304
WIRE 160 304 96 304
WIRE 1248 304 1184 304
WIRE 160 336 -16 336
WIRE 352 336 288 336
WIRE 480 336 352 336
WIRE 864 336 736 336
WIRE 1248 336 992 336
WIRE 1440 336 1376 336
WIRE -128 368 -160 368
WIRE 96 368 96 304
WIRE 160 368 96 368
WIRE 1184 368 1184 304
WIRE 1248 368 1184 368
WIRE -320 384 -352 384
WIRE -160 384 -160 368
WIRE -160 384 -192 384
WIRE 96 384 96 368
WIRE 1184 384 1184 368
WIRE 736 432 736 336
WIRE 864 432 736 432
WIRE 1056 432 992 432
WIRE -352 464 -352 384
WIRE 352 464 352 336
WIRE 352 464 -352 464
WIRE 736 464 736 432
WIRE 736 576 736 544
FLAG 864 -256 position
IOPIN 864 -256 Out
FLAG 432 32 velocity
IOPIN 432 32 Out
FLAG 352 224 0
FLAG 432 80 r_signal
IOPIN 432 80 Out
FLAG 128 -160 r_signal
IOPIN 128 -160 In
FLAG 496 -160 r_signal
IOPIN 496 -160 In
FLAG -352 288 position
IOPIN -352 288 In
FLAG 480 336 avg_amp
IOPIN 480 336 Out
FLAG 736 576 0
FLAG 128 -80 0
FLAG 96 384 0
FLAG 1184 384 0
SYMBOL integrator_module 720 -144 R0
SYMATTR InstName X3
SYMBOL integrator_module 320 -144 R0
SYMATTR InstName X4
SYMBOL constant_module 464 -112 R0
SYMATTR SpiceLine k = .1
SYMATTR InstName X5
SYMBOL sum_module -48 -144 R0
SYMATTR InstName X7
SYMBOL abs_module -224 272 R0
SYMATTR InstName X10
SYMBOL integrator_module 304 320 R0
SYMATTR InstName X11
SYMBOL sum_module -48 320 R0
SYMATTR InstName X13
SYMBOL voltage 352 96 R0
WINDOW 0 -38 14 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 1 0 0 0 .1 5)
SYMBOL sqrt_module 960 -96 R0
SYMATTR InstName X17
SYMBOL divider_module 960 0 R0
SYMATTR InstName X18
SYMBOL pos_module 960 96 R0
SYMATTR InstName X19
SYMBOL constant_module 656 32 R0
SYMATTR SpiceLine k = 2
SYMATTR InstName X20
SYMBOL neg_module 960 192 R0
SYMATTR InstName X21
SYMBOL sin_module 960 416 R0
SYMATTR InstName X22
SYMBOL voltage 736 448 R0
WINDOW 0 -38 14 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(-1.57 1.57 0 .99 .99 .001 2)
SYMBOL derivator_module 960 320 R0
SYMATTR InstName X23
SYMBOL log_module 1152 96 R0
SYMATTR InstName X24
SYMBOL integrator_module 1392 320 R0
SYMATTR InstName X25
SYMBOL kmult_module 960 -192 R0
SYMATTR InstName X28
SYMATTR SpiceLine k = 2
SYMBOL kmult_module -224 368 R0
SYMATTR InstName X6
SYMATTR SpiceLine k = -0.95
SYMBOL kmult_module -208 -192 R0
SYMATTR InstName X2
SYMATTR SpiceLine k = -1000
SYMBOL kmult_module -208 -96 R0
SYMATTR InstName X8
SYMATTR SpiceLine k = -5
TEXT 440 480 Left 0 !.tran 8
TEXT 144 -272 Left 0 ;Damped spring-mass oscillator
TEXT 480 120 Left 0 ;r_signal controls the reset of\nthe simulation
TEXT -16 504 Left 0 ;Average amplitude calc.
